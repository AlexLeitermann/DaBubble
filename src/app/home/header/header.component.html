<div class="header-wrapper">
    <!-- <app-animation-intro [pause]="introService.awaitingAppInit" (then)="introService.onAnimationComplete()" *ngIf="!introService.afterAnimationPlusTimeout" />
    <a href="" class="logo-wrapper" [ngClass]="{'transparent': !introService.afterAnimation}">
        <img src="/assets/img/logo_name.svg" alt="DABubble" class="logo">
    </a> -->
    <a href="" class="logo-wrapper">
        <img src="/assets/img/logo_name.svg" alt="DABubble" class="logo">
    </a>
    <form class="searchbar-wrapper" #searchForm="ngForm">
        <div class="searchbar-box">
            <input #searchbar name="searchbar" [(ngModel)]="searchInput" type="text" placeholder="Devspace durchsuchen" autocomplete="off" (keyup)="search()">
            @if(searchInput.length > 0) {
                <button type="button" class="searchbar-icon material-icons-outlined" (click)="onCloseSearchClick()">close</button>
                <ul class="search-results">
                    @for(channel of searchResultsChannels; track channel) {
                        <li># {{ channel.name }}</li>
                    }
                    @for(user of searchResultsUsers; track user) {
                        <li>&#0064;{{ user.name }}</li>
                    }
                    @for(post of searchResultsPosts; track post) {
                        <li>{{ post.message }}</li>
                    }
                </ul>
            } @else {
                <button type="button" class="searchbar-icon material-icons-outlined" (click)="autofocusSearch()">search</button>
            }
        </div>
    </form>
    <div class="userprofile-wrapper" (click)="openUserLogoutCard()">
        <span class="userprofile-name">{{ mainUser.name || '...' }}</span>
        <div class="userprofile-image-box">
            <img src="{{ mainUser.avatarSrc || '/assets/img/avatar/empty_avatar.svg' }}">
            <div class="onlinedot" 
                [ngClass]="{'online': activityService.getUserState(mainUser).state == 'active'}" 
                [ngClass]="{'idle': activityService.getUserState(mainUser).state == 'idle'}"
                [ngClass]="{'offline': activityService.getUserState(mainUser).state == 'loggedOut'}"
            ></div>
        </div>
        <div class="userprofile-menu-box">
            <img src="/assets/img/icons/dropdown_arrow.svg">
        </div>
    </div>
</div>