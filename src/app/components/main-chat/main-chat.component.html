<div class="main-container">
    <section class="main-section">
        <div class="main-header">
            <button class="channel-btn" (click)="onEditChannel()">
                # {{ currentChannel.name }}
                <span class="material-icons-outlined icon">keyboard_arrow_down</span>
            </button>
            <div class="main-header-members">
                <button class="members-btn" (click)="openMemberList()">
                    <div class="m-images-container">
                        <img src="/assets/img/avatar/avatar.svg" alt="Avatar">
                        <img src="/assets/img/avatar/avatar.svg" alt="Avatar">
                        <img src="/assets/img/avatar/avatar.svg" alt="Avatar">
                    </div>
                    <span>3</span>
                </button>
                <button class="add-members-btn">
                    <span class="material-icons-outlined icon">person_add_alt</span>
                </button>
            </div>
        </div>
        <div class="message-items-container">
            @if(currentChannel && currentChannel.posts.length > 0) {
            @for (post of currentChannel.posts; track post.post_id; let i = $index) {
            <div class="message-item-container">
                <app-time-separator [timestamp]="post.thread.date" />
                <app-message-item [post]="post" [hideEmojiPicker]="emojiPicker"
                    (showEmojiPicker)="handleEmojiStateChange($event)"
                    [messageSender]="isCurrentUserAuthor(post.thread.thread_id)"
                    (threadId)="handleThread($event)" />
            </div>
            }
            } @else {
            <div class="create-channel-message-container">
                <h3>
                    <span>#</span>
                    {{ currentChannel.name }}
                </h3>
                <p>
                    Du hast diesen Channel {{ timeService.getRelativeDay(0) }} erstellt. Das ist der Anfang des Channels
                    <span># {{ currentChannel.name }}.</span>
                </p>
            </div>
            }
        </div>
        <app-message-box [channelName]="currentChannel.name" (sent)="onCreatePost($event)"/>
    </section>
    <app-thread class="thread" *ngIf="currentPost" [currChannel]="currentChannel" [post]="currentPost" />
</div>